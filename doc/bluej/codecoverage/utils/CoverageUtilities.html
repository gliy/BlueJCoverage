<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_40) on Fri Mar 28 08:10:37 PDT 2014 -->
<title>CoverageUtilities</title>
<meta name="date" content="2014-03-28">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CoverageUtilities";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CoverageUtilities.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../bluej/codecoverage/utils/CoverageListener.Handler.html" title="class in bluej.codecoverage.utils"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?bluej/codecoverage/utils/CoverageUtilities.html" target="_top">Frames</a></li>
<li><a href="CoverageUtilities.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">bluej.codecoverage.utils</div>
<h2 title="Class CoverageUtilities" class="title">Class CoverageUtilities</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>bluej.codecoverage.utils.CoverageUtilities</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="strong">CoverageUtilities</span>
extends java.lang.Object</pre>
<div class="block">Utiltiy Class that controls all interactions that might be needed by multiple
 classes. This includes setting up the jacocoagent, reading the properties
 file, and gathering the results from the agent.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Ian</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#AGENT_FILE_NAME">AGENT_FILE_NAME</a></strong></code>
<div class="block">Standard Java package separator.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.io.File</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#agentFile">agentFile</a></strong></code>
<div class="block">Location of the Jacocoagent.jar file</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#coverageListener">coverageListener</a></strong></code>
<div class="block">Jacoco Agent <a href="../../../bluej/codecoverage/utils/CoverageListener.html" title="class in bluej.codecoverage.utils"><code>CoverageListener</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#END_PORT">END_PORT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#HELP_URL">HELP_URL</a></strong></code>
<div class="block">URL for help dialog</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#hooked">hooked</a></strong></code>
<div class="block">Boolean if we have already registered a shutdown hook</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../bluej/codecoverage/main/CodeCoverageModule.html" title="interface in bluej.codecoverage.main">CodeCoverageModule</a></code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#module">module</a></strong></code>
<div class="block">Module to load information from.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#port">port</a></strong></code>
<div class="block">Current port that we use</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#PORT_NUMBER">PORT_NUMBER</a></strong></code>
<div class="block">Key we store the port number under</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#PROPERTY_FILE_NAME">PROPERTY_FILE_NAME</a></strong></code>
<div class="block">The number of targets.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.io.File</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#propertyFile">propertyFile</a></strong></code>
<div class="block">File to write our properties to on shutdown</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#START_PORT">START_PORT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#VM_ARG_KEY">VM_ARG_KEY</a></strong></code>
<div class="block">Key BlueJ uses for vm arguments</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#vmArgsToAdd">vmArgsToAdd</a></strong></code>
<div class="block">VM Args to be appended under <a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#VM_ARG_KEY"><code>VM_ARG_KEY</code></a></div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#CoverageUtilities(bluej.codecoverage.main.CodeCoverageModule)">CoverageUtilities</a></strong>(<a href="../../../bluej/codecoverage/main/CodeCoverageModule.html" title="interface in bluej.codecoverage.main">CodeCoverageModule</a>&nbsp;module)</code>
<div class="block">Instantiates a new test attacher utilities, loads any saved preferences,
 and sets up the required listeners to collect coverage data.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#addShutdownHook()">addShutdownHook</a></strong>()</code>
<div class="block">Registers a shutdown hook if one does not already exist.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#buildAgentPath()">buildAgentPath</a></strong>()</code>
<div class="block">Generates the VM Argument for locating the agent jarfile</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private javax.swing.JComponent</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#buildErrorMessage(java.lang.String)">buildErrorMessage</a></strong>(java.lang.String&nbsp;ex)</code>
<div class="block">Generates a generic error message to display.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#buildVMArgs()">buildVMArgs</a></strong>()</code>
<div class="block">Builds the entire VM Argument string that will be added to the
 bluej.properties file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#checkHooks()">checkHooks</a></strong>()</code>
<div class="block">Validates that the bluej properties file has the required VM arguments and
 that the agent jarfile is present.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#clearResults()">clearResults</a></strong>()</code>
<div class="block">Requests a reset of all collected coverage information so far.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#close(java.io.Closeable)">close</a></strong>(java.io.Closeable&nbsp;stream)</code>
<div class="block">Utility method for swallowing IOExceptions when closing a stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#copyAgent(java.lang.String)">copyAgent</a></strong>(java.lang.String&nbsp;jarFile)</code>
<div class="block">Extracts the jacocoagent.jar from the Extension's jar file and into the
 local file system.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#findFiles()">findFiles</a></strong>()</code>
<div class="block">Locates the jacocoagent.jar and bluej.properties</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#getExcludes()">getExcludes</a></strong>()</code>
<div class="block">Generates classes to ignore based off preferences.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../bluej/codecoverage/utils/serial/CoveragePackage.html" title="class in bluej.codecoverage.utils.serial">CoveragePackage</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#getResults(java.io.File)">getResults</a></strong>(java.io.File&nbsp;file)</code>
<div class="block">Requests a dump of all collected coverage information for all classes
 located under file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.Throwable</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#getRootCause(java.lang.Throwable)">getRootCause</a></strong>(java.lang.Throwable&nbsp;e)</code>
<div class="block">Utility method for find the root of an exception.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#replaceVmArgs(java.lang.String, java.lang.String)">replaceVmArgs</a></strong>(java.lang.String&nbsp;currentArgs,
             java.lang.String&nbsp;newArgs)</code>
<div class="block">Fixes any errors in the VM arguments loaded from the properties file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#setup()">setup</a></strong>()</code>
<div class="block">Finds the required files for loading preferences, and running the
 listener, and verifies everything exists and is valid.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#setupListener()">setupListener</a></strong>()</code>
<div class="block">Sets up the the CoverageListener that records Coverage data from the
 client.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#updateVmArguments()">updateVmArguments</a></strong>()</code>
<div class="block">Updates any out to date information in our VM Argument that we saved.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="START_PORT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>START_PORT</h4>
<pre>private static final&nbsp;int START_PORT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#bluej.codecoverage.utils.CoverageUtilities.START_PORT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="END_PORT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>END_PORT</h4>
<pre>private static final&nbsp;int END_PORT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#bluej.codecoverage.utils.CoverageUtilities.END_PORT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGENT_FILE_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGENT_FILE_NAME</h4>
<pre>private static final&nbsp;java.lang.String AGENT_FILE_NAME</pre>
<div class="block">Standard Java package separator.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#bluej.codecoverage.utils.CoverageUtilities.AGENT_FILE_NAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="PROPERTY_FILE_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PROPERTY_FILE_NAME</h4>
<pre>private static final&nbsp;java.lang.String PROPERTY_FILE_NAME</pre>
<div class="block">The number of targets.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#bluej.codecoverage.utils.CoverageUtilities.PROPERTY_FILE_NAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="VM_ARG_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>VM_ARG_KEY</h4>
<pre>private static final&nbsp;java.lang.String VM_ARG_KEY</pre>
<div class="block">Key BlueJ uses for vm arguments</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#bluej.codecoverage.utils.CoverageUtilities.VM_ARG_KEY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="PORT_NUMBER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PORT_NUMBER</h4>
<pre>private static final&nbsp;java.lang.String PORT_NUMBER</pre>
<div class="block">Key we store the port number under</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#bluej.codecoverage.utils.CoverageUtilities.PORT_NUMBER">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="HELP_URL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HELP_URL</h4>
<pre>private static final&nbsp;java.lang.String HELP_URL</pre>
<div class="block">URL for help dialog</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#bluej.codecoverage.utils.CoverageUtilities.HELP_URL">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="vmArgsToAdd">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>vmArgsToAdd</h4>
<pre>private&nbsp;java.lang.String vmArgsToAdd</pre>
<div class="block">VM Args to be appended under <a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#VM_ARG_KEY"><code>VM_ARG_KEY</code></a></div>
</li>
</ul>
<a name="port">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>port</h4>
<pre>private&nbsp;int port</pre>
<div class="block">Current port that we use</div>
</li>
</ul>
<a name="module">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>module</h4>
<pre>private&nbsp;<a href="../../../bluej/codecoverage/main/CodeCoverageModule.html" title="interface in bluej.codecoverage.main">CodeCoverageModule</a> module</pre>
<div class="block">Module to load information from.</div>
</li>
</ul>
<a name="coverageListener">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>coverageListener</h4>
<pre>private&nbsp;java.lang.Object coverageListener</pre>
<div class="block">Jacoco Agent <a href="../../../bluej/codecoverage/utils/CoverageListener.html" title="class in bluej.codecoverage.utils"><code>CoverageListener</code></a>.
 <p>
 Created by a different ClassLoader, so must be Object.</div>
</li>
</ul>
<a name="propertyFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>propertyFile</h4>
<pre>private&nbsp;java.io.File propertyFile</pre>
<div class="block">File to write our properties to on shutdown</div>
</li>
</ul>
<a name="agentFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>agentFile</h4>
<pre>private&nbsp;java.io.File agentFile</pre>
<div class="block">Location of the Jacocoagent.jar file</div>
</li>
</ul>
<a name="hooked">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hooked</h4>
<pre>private static&nbsp;boolean hooked</pre>
<div class="block">Boolean if we have already registered a shutdown hook</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CoverageUtilities(bluej.codecoverage.main.CodeCoverageModule)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CoverageUtilities</h4>
<pre>public&nbsp;CoverageUtilities(<a href="../../../bluej/codecoverage/main/CodeCoverageModule.html" title="interface in bluej.codecoverage.main">CodeCoverageModule</a>&nbsp;module)
                  throws java.io.IOException</pre>
<div class="block">Instantiates a new test attacher utilities, loads any saved preferences,
 and sets up the required listeners to collect coverage data.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>module</code> - module instance to save and load information from.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if any error is encountered while loading saved preferences,
            throws an <code>IOException</code>.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setupListener()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupListener</h4>
<pre>private&nbsp;void&nbsp;setupListener()</pre>
<div class="block">Sets up the the CoverageListener that records Coverage data from the
 client.
 <p>
 This requires the use of <a href="../../../bluej/codecoverage/utils/BreakoutClassLoader.html" title="class in bluej.codecoverage.utils"><code>BreakoutClassLoader</code></a> due to the inability
 to load any classes outside of your extension by BlueJ's
 <a href="../../../bluej/codecoverage/utils/BreakoutClassLoader.html" title="class in bluej.codecoverage.utils"><code>BreakoutClassLoader</code></a>.</div>
</li>
</ul>
<a name="clearResults()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearResults</h4>
<pre>public&nbsp;void&nbsp;clearResults()</pre>
<div class="block">Requests a reset of all collected coverage information so far.
 <p>
 Used when you want to start a fresh run.</div>
</li>
</ul>
<a name="getResults(java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResults</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../bluej/codecoverage/utils/serial/CoveragePackage.html" title="class in bluej.codecoverage.utils.serial">CoveragePackage</a>&gt;&nbsp;getResults(java.io.File&nbsp;file)</pre>
<div class="block">Requests a dump of all collected coverage information for all classes
 located under file. If any error is encountered while reading the coverage
 information, an error message is displayed, and null is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>file</code> - The base directory for finding classes to return coverage for.</dd>
<dt><span class="strong">Returns:</span></dt><dd>List of code coverage methods for each package found in the file
         directory.</dd></dl>
</li>
</ul>
<a name="buildErrorMessage(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildErrorMessage</h4>
<pre>private&nbsp;javax.swing.JComponent&nbsp;buildErrorMessage(java.lang.String&nbsp;ex)</pre>
<div class="block">Generates a generic error message to display.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ex</code> - the error to show.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a TextPane that can be added to a dialog for error reporting.</dd></dl>
</li>
</ul>
<a name="setup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setup</h4>
<pre>public&nbsp;void&nbsp;setup()
           throws java.io.IOException</pre>
<div class="block">Finds the required files for loading preferences, and running the
 listener, and verifies everything exists and is valid.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If any error is encountered while reading the properties,
            throws an <code>IOException</code></dd></dl>
</li>
</ul>
<a name="findFiles()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findFiles</h4>
<pre>private&nbsp;void&nbsp;findFiles()</pre>
<div class="block">Locates the jacocoagent.jar and bluej.properties</div>
</li>
</ul>
<a name="checkHooks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkHooks</h4>
<pre>private&nbsp;void&nbsp;checkHooks()
                 throws java.io.IOException</pre>
<div class="block">Validates that the bluej properties file has the required VM arguments and
 that the agent jarfile is present.
 <p>
 If jarfile is missing, then it is extracted from the plugin's jar file,
 and placed in the required location.</br> If the value under
 <a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#VM_ARG_KEY"><code>VM_ARG_KEY</code></a> in the properties file is invalid, then a shutdown
 hook is added to correct the issue. </br> If any of the errors above
 occur, the user must restart BlueJ before being able to use the
 plugin.</br></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If any error is encountered while reading the properties,
            throws an <code>IOException</code></dd></dl>
</li>
</ul>
<a name="buildAgentPath()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildAgentPath</h4>
<pre>private&nbsp;java.lang.String&nbsp;buildAgentPath()</pre>
<div class="block">Generates the VM Argument for locating the agent jarfile</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>javaagent VM flag with the path to the javaagent</dd></dl>
</li>
</ul>
<a name="buildVMArgs()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildVMArgs</h4>
<pre>private&nbsp;java.lang.String&nbsp;buildVMArgs()</pre>
<div class="block">Builds the entire VM Argument string that will be added to the
 bluej.properties file.
 <p>
 Uses <a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#buildAgentPath()"><code>buildAgentPath()</code></a> for locating the jar file, <a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#port"><code>port</code></a>
 for the port number, and <a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#getExcludes()"><code>getExcludes()</code></a> for any classes to ignore
 when collecting coverage information.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Complete VM Argument for the extension to properly function.</dd></dl>
</li>
</ul>
<a name="getExcludes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExcludes</h4>
<pre>private&nbsp;java.lang.String&nbsp;getExcludes()</pre>
<div class="block">Generates classes to ignore based off preferences.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Single comma seperated String for classes to ignore.</dd></dl>
</li>
</ul>
<a name="addShutdownHook()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addShutdownHook</h4>
<pre>public&nbsp;void&nbsp;addShutdownHook()</pre>
<div class="block">Registers a shutdown hook if one does not already exist.
 <p>
 This adds our vm arguments generated by <a href="../../../bluej/codecoverage/utils/CoverageUtilities.html#buildVMArgs()"><code>buildVMArgs()</code></a> to
 bluej.properties, and prevents BlueJ from overwriting our changes to the
 properties file.</div>
</li>
</ul>
<a name="replaceVmArgs(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replaceVmArgs</h4>
<pre>private static&nbsp;java.lang.String&nbsp;replaceVmArgs(java.lang.String&nbsp;currentArgs,
                             java.lang.String&nbsp;newArgs)</pre>
<div class="block">Fixes any errors in the VM arguments loaded from the properties file.
 <p>
 This takes care of the issue where other VM Arguments are present that we
 want to preserve.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>currentArgs</code> - All existing VM Args in the properties file.</dd><dd><code>newArgs</code> - the VM Args we want to add to the properties file.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The VMArg to add</dd></dl>
</li>
</ul>
<a name="updateVmArguments()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateVmArguments</h4>
<pre>private&nbsp;void&nbsp;updateVmArguments()</pre>
<div class="block">Updates any out to date information in our VM Argument that we saved.
 <p>
 This increases the port number when it is executed, and updates the
 properties file, so if anyother instance of BlueJ is launched while this
 instance is open, it will attempt to use a different port to collect
 coverage information.</div>
</li>
</ul>
<a name="copyAgent(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyAgent</h4>
<pre>private&nbsp;void&nbsp;copyAgent(java.lang.String&nbsp;jarFile)
                throws java.io.IOException</pre>
<div class="block">Extracts the jacocoagent.jar from the Extension's jar file and into the
 local file system.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>jarFile</code> - the location of the Extension's jar file.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If any error is encountered while reading or writing the jar
            file, throws an <code>IOException</code></dd></dl>
</li>
</ul>
<a name="close(java.io.Closeable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public static&nbsp;void&nbsp;close(java.io.Closeable&nbsp;stream)</pre>
<div class="block">Utility method for swallowing IOExceptions when closing a stream.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>stream</code> - stream to close.</dd></dl>
</li>
</ul>
<a name="getRootCause(java.lang.Throwable)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getRootCause</h4>
<pre>private static&nbsp;java.lang.Throwable&nbsp;getRootCause(java.lang.Throwable&nbsp;e)</pre>
<div class="block">Utility method for find the root of an exception.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>e</code> - exception to trace.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the Actual exception at the root.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CoverageUtilities.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../bluej/codecoverage/utils/CoverageListener.Handler.html" title="class in bluej.codecoverage.utils"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?bluej/codecoverage/utils/CoverageUtilities.html" target="_top">Frames</a></li>
<li><a href="CoverageUtilities.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
